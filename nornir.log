2019-04-23 11:00:17,534 -  nornir.core -     INFO -        run() - Running task 'get_backup' with args {} on 1 hosts
2019-04-23 12:22:05,105 -  nornir.core -     INFO -        run() - Running task 'get_backup' with args {} on 1 hosts
2019-04-23 12:23:08,464 -  nornir.core -     INFO -        run() - Running task 'get_backup' with args {} on 1 hosts
2019-04-23 12:29:42,169 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 12:29:49,190 -  nornir.core -     INFO -        run() - Running task 'get_backup' with args {} on 1 hosts
2019-04-23 12:29:54,542 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'get_backup' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 51, in get_backup
    savetodir(output, dir_backup, task.host)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 65, in savetodir
    os.chdir(dir_name)
FileNotFoundError: [Errno 2] No such file or directory: './BACKUP'

2019-04-23 15:11:39,139 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 15:13:42,303 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 15:15:15,346 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 15:15:37,330 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 15:16:20,900 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 15:16:52,908 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 15:17:33,468 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 16:06:14,152 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 16:06:20,894 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:06:20,945 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 113, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 187, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: interfaces.j2

2019-04-23 16:06:20,947 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 82, in send_template
    path="./templates"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:07:48,245 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 16:07:55,097 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:07:55,112 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 113, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 187, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: interfaces.j2

2019-04-23 16:07:55,113 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 82, in send_template
    path="./templates"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:08:29,200 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 16:08:36,056 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:08:36,071 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 113, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 187, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: interfaces.j2

2019-04-23 16:08:36,073 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 82, in send_template
    path="./templates"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:09:17,809 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 16:09:24,882 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:09:24,896 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 113, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 187, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: interfaces.j2

2019-04-23 16:09:24,898 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 82, in send_template
    path="templates"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:10:01,586 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 16:10:08,315 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:10:08,330 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 113, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 187, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: interfaces.j2

2019-04-23 16:10:08,330 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 82, in send_template
    path="./templates"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:11:21,162 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 16:11:28,311 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:11:28,325 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 113, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 187, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: interfaces.j2

2019-04-23 16:11:28,326 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 82, in send_template
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:14:29,536 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 16:14:36,446 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:14:36,460 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 113, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 187, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: interfaces.j2

2019-04-23 16:14:36,460 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 82, in send_template
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:14:46,537 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 16:14:53,606 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:14:53,621 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 113, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 187, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: interfaces.j2

2019-04-23 16:14:53,621 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 82, in send_template
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:16:47,426 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 16:16:54,272 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:16:54,287 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 113, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 187, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: interfaces.j2

2019-04-23 16:16:54,288 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 82, in send_template
    path=".templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:17:50,771 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 16:17:57,705 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:17:57,720 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 113, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 187, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: interfaces.j2

2019-04-23 16:17:57,720 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 82, in send_template
    path="templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:20:29,286 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 16:20:36,039 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:20:36,054 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 82, in send_template
    path=templates
NameError: name 'templates' is not defined

2019-04-23 16:21:46,794 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 16:21:53,767 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:21:53,782 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 113, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 187, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: interfaces.j2

2019-04-23 16:21:53,782 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 82, in send_template
    path=f"{dir_template}"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:23:33,517 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 16:23:40,666 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:23:40,683 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 113, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 187, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: interfaces.j2

2019-04-23 16:23:40,684 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 82, in send_template
    path=f"{dir_template}"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:24:21,463 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 16:24:28,352 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:24:28,367 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
TypeError: template_file() missing 1 required positional argument: 'path'

2019-04-23 16:24:28,369 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 81, in send_template
    template="interfaces.j2",
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:29:44,654 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 16:29:51,520 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:29:51,534 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 113, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 187, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: interfaces.j2

2019-04-23 16:29:51,535 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 82, in send_template
    path=""
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:31:19,184 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 16:31:25,944 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:31:25,958 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 113, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 187, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: base_intf.j2

2019-04-23 16:31:25,959 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 82, in send_template
    path="templates"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:32:11,602 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 16:32:18,466 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:32:18,481 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 113, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 187, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: base_intf.j2

2019-04-23 16:32:18,482 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 82, in send_template
    path="/templates"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:32:45,585 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:32:45,600 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 113, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 187, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: base_intf.j2

2019-04-23 16:32:45,601 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 86, in send_template
    path="/templates"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:32:57,461 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:32:57,476 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 113, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 187, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: base_intf.j2

2019-04-23 16:32:57,476 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 86, in send_template
    path="/templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:33:04,811 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:33:04,847 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 125, in load
    code = environment.compile(source, name, filename)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 591, in compile
    self.handle_exception(exc_info, source_hint=source_hint)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/base_intf.j2", line 4, in template
    {% for intf in host['facts']['facts']['interface_list]' %}
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 497, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 901, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 883, in subparse
    rv = self.parse_statement()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 130, in parse_statement
    return getattr(self, 'parse_' + self.stream.current.value)()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 194, in parse_for
    extra_end_rules=('name:recursive',))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 620, in parse_tuple
    args.append(parse())
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 612, in <lambda>
    parse = lambda: self.parse_expression(with_condexpr=False)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 433, in parse_expression
    return self.parse_or()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 450, in parse_or
    left = self.parse_and()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 459, in parse_and
    left = self.parse_not()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 470, in parse_not
    return self.parse_compare()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 474, in parse_compare
    expr = self.parse_math1()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 496, in parse_math1
    left = self.parse_concat()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 507, in parse_concat
    args = [self.parse_math2()]
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 517, in parse_math2
    left = self.parse_pow()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 528, in parse_pow
    left = self.parse_unary()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 547, in parse_unary
    node = self.parse_postfix(node)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 672, in parse_postfix
    node = self.parse_subscript(node)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 713, in parse_subscript
    args.append(self.parse_subscribed())
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 729, in parse_subscribed
    node = self.parse_expression()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 432, in parse_expression
    return self.parse_condexpr()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 437, in parse_condexpr
    expr1 = self.parse_or()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 450, in parse_or
    left = self.parse_and()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 459, in parse_and
    left = self.parse_not()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 470, in parse_not
    return self.parse_compare()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 474, in parse_compare
    expr = self.parse_math1()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 496, in parse_math1
    left = self.parse_concat()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 507, in parse_concat
    args = [self.parse_math2()]
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 520, in parse_math2
    next(self.stream)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/lexer.py", line 359, in __next__
    self.current = next(self._iter)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/lexer.py", line 562, in wrap
    for lineno, token, value in stream:
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/lexer.py", line 690, in tokeniter
    filename)
jinja2.exceptions.TemplateSyntaxError: unexpected '}', expected ']'

2019-04-23 16:33:04,847 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 86, in send_template
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:33:53,271 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:33:53,294 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 125, in load
    code = environment.compile(source, name, filename)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 591, in compile
    self.handle_exception(exc_info, source_hint=source_hint)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/base_intf.j2", line 4, in template
    {% for intf in host['facts']['facts']['interface_list]' %}
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 497, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 901, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 883, in subparse
    rv = self.parse_statement()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 130, in parse_statement
    return getattr(self, 'parse_' + self.stream.current.value)()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 194, in parse_for
    extra_end_rules=('name:recursive',))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 620, in parse_tuple
    args.append(parse())
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 612, in <lambda>
    parse = lambda: self.parse_expression(with_condexpr=False)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 433, in parse_expression
    return self.parse_or()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 450, in parse_or
    left = self.parse_and()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 459, in parse_and
    left = self.parse_not()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 470, in parse_not
    return self.parse_compare()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 474, in parse_compare
    expr = self.parse_math1()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 496, in parse_math1
    left = self.parse_concat()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 507, in parse_concat
    args = [self.parse_math2()]
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 517, in parse_math2
    left = self.parse_pow()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 528, in parse_pow
    left = self.parse_unary()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 547, in parse_unary
    node = self.parse_postfix(node)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 672, in parse_postfix
    node = self.parse_subscript(node)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 713, in parse_subscript
    args.append(self.parse_subscribed())
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 729, in parse_subscribed
    node = self.parse_expression()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 432, in parse_expression
    return self.parse_condexpr()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 437, in parse_condexpr
    expr1 = self.parse_or()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 450, in parse_or
    left = self.parse_and()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 459, in parse_and
    left = self.parse_not()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 470, in parse_not
    return self.parse_compare()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 474, in parse_compare
    expr = self.parse_math1()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 496, in parse_math1
    left = self.parse_concat()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 507, in parse_concat
    args = [self.parse_math2()]
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 520, in parse_math2
    next(self.stream)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/lexer.py", line 359, in __next__
    self.current = next(self._iter)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/lexer.py", line 562, in wrap
    for lineno, token, value in stream:
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/lexer.py", line 690, in tokeniter
    filename)
jinja2.exceptions.TemplateSyntaxError: unexpected '}', expected ']'

2019-04-23 16:33:53,295 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 86, in send_template
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:34:01,462 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:34:01,490 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 18, in render_from_file
    return t.render(**kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/base_intf.j2", line 4, in top-level template code
    {% for intf in host['facts']['facts']['interface_list'] %}
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 411, in getitem
    return obj[argument]
jinja2.exceptions.UndefinedError: 'nornir.core.inventory.Host object' has no attribute 'facts'

2019-04-23 16:34:01,490 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 86, in send_template
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:35:07,699 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 16:35:14,741 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:35:14,756 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 113, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 187, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: base_intf.j2

2019-04-23 16:35:14,756 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 83, in send_template
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-23 16:46:30,602 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:46:30,616 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 81, in send_template
    task=load_yaml,
NameError: name 'load_yaml' is not defined

2019-04-23 16:48:26,075 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 16:48:26,092 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'load_yaml' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/data/load_yaml.py", line 24, in load_yaml
    with open(file, "r") as f:
FileNotFoundError: [Errno 2] No such file or directory: './FACTS/CSR1000v-lab+_fact.yml'

2019-04-23 16:48:26,092 - nornir.core.task -    ERROR -      start() - Host 'CSR1000v-lab': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 83, in send_template
    file=f'{dir_fact}/{task.host}+_fact.yml'
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: load_yaml (failed)


2019-04-23 16:48:54,613 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 17:15:10,086 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 17:29:11,219 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 17:29:11,344 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'napalm_get' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/netmiko/base_connection.py", line 858, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/paramiko/client.py", line 362, in connect
    raise NoValidConnectionsError(errors)
paramiko.ssh_exception.NoValidConnectionsError: [Errno None] Unable to connect to port 22 on 10.104.127.1

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/napalm/base/base.py", line 87, in _netmiko_open
    **netmiko_optional_args
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/netmiko/ssh_dispatcher.py", line 228, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/netmiko/base_connection.py", line 312, in __init__
    self.establish_connection()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/netmiko/base_connection.py", line 864, in establish_connection
    raise NetMikoTimeoutException(msg)
netmiko.ssh_exception.NetMikoTimeoutException: Connection to device timed-out: cisco_ios 10.104.127.1:22

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/networking/napalm_get.py", line 49, in napalm_get
    device = task.host.get_connection("napalm", task.nornir.config)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/inventory.py", line 302, in get_connection
    extras=conn.extras,
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/inventory.py", line 352, in open_connection
    configuration=configuration,
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/connections/napalm.py", line 51, in open
    connection.open()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/napalm/ios/ios.py", line 151, in open
    device_type, netmiko_optional_args=self.netmiko_optional_args
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/napalm/base/base.py", line 90, in _netmiko_open
    raise ConnectionException("Cannot connect to {}".format(self.hostname))
napalm.base.exceptions.ConnectionException: Cannot connect to 10.104.127.1

2019-04-23 17:29:11,345 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'get_host_fact' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 41, in get_host_fact
    get_fact = task.run(task=networking.napalm_get, getters=['facts'])
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: napalm_get (failed)


2019-04-23 17:29:11,444 -  nornir.core -     INFO -        run() - Running task 'get_backup' with args {} on 1 hosts
2019-04-23 17:29:11,569 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 18:01:34,543 -  nornir.core -     INFO -        run() - Running task 'get_host_fact' with args {} on 1 hosts
2019-04-23 18:01:40,972 -  nornir.core -     INFO -        run() - Running task 'get_backup' with args {} on 1 hosts
2019-04-23 18:01:48,582 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'get_backup' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 59, in get_backup
    savetodir(output, dir_backup, task.host)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 72, in savetodir
    os.chdir(dir_name)
FileNotFoundError: [Errno 2] No such file or directory: './BACKUP'

2019-04-23 18:01:48,614 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-23 18:05:01,967 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 08:55:19,192 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 09:06:10,039 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 09:06:10,114 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 125, in load
    code = environment.compile(source, name, filename)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 591, in compile
    self.handle_exception(exc_info, source_hint=source_hint)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/base_intf.j2", line 2, in template
    {% if intf.tag is defined %%}}
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 497, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 901, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 883, in subparse
    rv = self.parse_statement()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 130, in parse_statement
    return getattr(self, 'parse_' + self.stream.current.value)()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 199, in parse_for
    body = self.parse_statements(('name:endfor', 'name:else'))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 165, in parse_statements
    result = self.subparse(end_tokens)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 883, in subparse
    rv = self.parse_statement()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 130, in parse_statement
    return getattr(self, 'parse_' + self.stream.current.value)()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 211, in parse_if
    node.test = self.parse_tuple(with_condexpr=False)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 620, in parse_tuple
    args.append(parse())
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 612, in <lambda>
    parse = lambda: self.parse_expression(with_condexpr=False)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 433, in parse_expression
    return self.parse_or()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 450, in parse_or
    left = self.parse_and()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 459, in parse_and
    left = self.parse_not()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 470, in parse_not
    return self.parse_compare()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 474, in parse_compare
    expr = self.parse_math1()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 496, in parse_math1
    left = self.parse_concat()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 507, in parse_concat
    args = [self.parse_math2()]
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 521, in parse_math2
    right = self.parse_pow()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 528, in parse_pow
    left = self.parse_unary()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 546, in parse_unary
    node = self.parse_primary()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 583, in parse_primary
    self.fail("unexpected '%s'" % describe_token(token), token.lineno)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 59, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: unexpected 'end of statement block'

2019-04-24 09:06:10,114 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 95, in send_template
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-24 09:06:45,713 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 09:06:45,755 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'Interface Configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 125, in load
    code = environment.compile(source, name, filename)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 591, in compile
    self.handle_exception(exc_info, source_hint=source_hint)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/base_intf.j2", line 4, in template
    {% else %%}}
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 497, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 901, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 883, in subparse
    rv = self.parse_statement()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 130, in parse_statement
    return getattr(self, 'parse_' + self.stream.current.value)()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 199, in parse_for
    body = self.parse_statements(('name:endfor', 'name:else'))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 165, in parse_statements
    result = self.subparse(end_tokens)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 883, in subparse
    rv = self.parse_statement()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 130, in parse_statement
    return getattr(self, 'parse_' + self.stream.current.value)()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 223, in parse_if
    drop_needle=True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 164, in parse_statements
    self.stream.expect('block_end')
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/lexer.py", line 384, in expect
    self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: expected token 'end of statement block', got '%'

2019-04-24 09:06:45,756 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 95, in send_template
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Interface Configuration (failed)


2019-04-24 09:07:22,527 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 09:08:02,542 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 09:16:25,384 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 09:57:20,740 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 10:02:08,919 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 10:02:52,973 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 10:05:15,811 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 10:05:43,650 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 10:06:51,950 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 10:07:28,228 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 10:12:27,093 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 10:12:27,117 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP VLANS' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 125, in load
    code = environment.compile(source, name, filename)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 591, in compile
    self.handle_exception(exc_info, source_hint=source_hint)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/vlans.j2", line 1, in template
    {% for vlan int host.vlans %}
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 497, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 901, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 883, in subparse
    rv = self.parse_statement()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 130, in parse_statement
    return getattr(self, 'parse_' + self.stream.current.value)()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 192, in parse_for
    self.stream.expect('name:in')
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/lexer.py", line 384, in expect
    self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: expected token 'in', got 'int'

2019-04-24 10:12:27,118 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 95, in send_template
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP VLANS (failed)


2019-04-24 10:12:43,842 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 10:24:22,620 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 16:18:50,873 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 16:28:59,527 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 16:28:59,565 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP VLANS' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 18, in render_from_file
    return t.render(**kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/vlans.j2", line 7, in top-level template code
    vtp mode {{ vtp.mode }}
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'vtp' is undefined

2019-04-24 16:28:59,565 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 95, in send_template
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP VLANS (failed)


2019-04-24 16:29:28,681 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 16:29:28,706 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP VLANS' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 18, in render_from_file
    return t.render(**kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/vlans.j2", line 7, in top-level template code
    vtp mode {{ vtp.mode }}
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'vtp' is undefined

2019-04-24 16:29:28,706 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 95, in send_template
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP VLANS (failed)


2019-04-24 16:30:25,336 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 16:30:25,361 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP VLANS' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 18, in render_from_file
    return t.render(**kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/vlans.j2", line 7, in top-level template code
    vtp mode {{ vtp.mode }}
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'vtp' is undefined

2019-04-24 16:30:25,362 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 95, in send_template
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP VLANS (failed)


2019-04-24 16:32:06,207 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 16:32:06,232 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP VLANS' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 18, in render_from_file
    return t.render(**kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/vlans.j2", line 7, in top-level template code
    vtp mode {{ vtp.mode }}
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'vtp' is undefined

2019-04-24 16:32:06,232 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 95, in send_template
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP VLANS (failed)


2019-04-24 16:32:55,430 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 16:32:55,457 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP VLANS' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 18, in render_from_file
    return t.render(**kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/vlans.j2", line 7, in top-level template code
    vtp mode {{ vlans_vtp.mode }}
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'vlans_vtp' is undefined

2019-04-24 16:32:55,457 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'send_template' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 95, in send_template
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP VLANS (failed)


2019-04-24 16:35:09,248 -  nornir.core -     INFO -        run() - Running task 'send_template' with args {} on 1 hosts
2019-04-24 17:10:27,765 -  nornir.core -     INFO -        run() - Running task 'interface_templates' with args {} on 1 hosts
2019-04-24 17:31:16,828 -  nornir.core -     INFO -        run() - Running task 'interface_templates' with args {} on 1 hosts
2019-04-24 17:37:11,716 -  nornir.core -     INFO -        run() - Running task 'interface_templates' with args {} on 1 hosts
2019-04-24 18:03:48,525 -  nornir.core -     INFO -        run() - Running task 'interface_templates' with args {} on 1 hosts
2019-04-25 08:34:17,907 -  nornir.core -     INFO -        run() - Running task 'interface_templates' with args {} on 1 hosts
2019-04-25 09:20:23,941 -  nornir.core -     INFO -        run() - Running task 'interface_templates' with args {} on 1 hosts
2019-04-25 09:20:23,988 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP VLANS' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 113, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 187, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: vlans.j2

2019-04-25 09:20:23,988 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'interface_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 99, in interface_templates
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP VLANS (failed)


2019-04-25 09:21:29,341 -  nornir.core -     INFO -        run() - Running task 'interface_templates' with args {} on 1 hosts
2019-04-25 09:22:32,231 -  nornir.core -     INFO -        run() - Running task 'interface_templates' with args {} on 1 hosts
2019-04-25 09:23:32,293 -  nornir.core -     INFO -        run() - Running task 'interface_templates' with args {} on 1 hosts
2019-04-25 09:23:32,315 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'interface_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 91, in interface_templates
    config = services_templates(task)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 134, in services_templates
    config += r.result
UnboundLocalError: local variable 'config' referenced before assignment

2019-04-25 09:24:21,101 -  nornir.core -     INFO -        run() - Running task 'interface_templates' with args {} on 1 hosts
2019-04-25 09:24:21,130 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'interface_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 91, in interface_templates
    config = services_templates(task)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 134, in services_templates
    config += r.result
UnboundLocalError: local variable 'config' referenced before assignment

2019-04-25 09:25:23,804 -  nornir.core -     INFO -        run() - Running task 'interface_templates' with args {} on 1 hosts
2019-04-25 09:29:50,439 -  nornir.core -     INFO -        run() - Running task 'interface_templates' with args {} on 1 hosts
2019-04-25 11:51:28,881 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-25 11:51:28,917 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'push_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 85, in push_templates
    config += "\n\n"
TypeError: unsupported operand type(s) for +=: 'NoneType' and 'str'

2019-04-25 11:54:15,243 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-25 11:54:15,300 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP OSPF' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 125, in load
    code = environment.compile(source, name, filename)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 591, in compile
    self.handle_exception(exc_info, source_hint=source_hint)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/ospf.j2", line 5, in template
    {% endfor %}
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 497, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 901, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 883, in subparse
    rv = self.parse_statement()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 130, in parse_statement
    return getattr(self, 'parse_' + self.stream.current.value)()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 199, in parse_for
    body = self.parse_statements(('name:endfor', 'name:else'))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 165, in parse_statements
    result = self.subparse(end_tokens)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 883, in subparse
    rv = self.parse_statement()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 130, in parse_statement
    return getattr(self, 'parse_' + self.stream.current.value)()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 213, in parse_if
    'name:endif'))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 165, in parse_statements
    result = self.subparse(end_tokens)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 883, in subparse
    rv = self.parse_statement()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 144, in parse_statement
    self.fail_unknown_tag(token.value, token.lineno)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 97, in fail_unknown_tag
    return self._fail_ut_eof(name, self._end_token_stack, lineno)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 90, in _fail_ut_eof
    self.fail(' '.join(message), lineno)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 59, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: Encountered unknown tag 'endfor'. You probably made a nesting mistake. Jinja is expecting this tag, but currently looking for 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.

2019-04-25 11:54:15,301 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'push_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 88, in push_templates
    config += routing_templates(task)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 181, in routing_templates
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP OSPF (failed)


2019-04-25 11:55:03,637 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-25 11:56:53,469 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-25 12:02:06,534 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-25 12:02:06,590 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP OSPF' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 125, in load
    code = environment.compile(source, name, filename)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 591, in compile
    self.handle_exception(exc_info, source_hint=source_hint)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/ospf.j2", line 7, in template
    network {{ intf.ip }} {{ intf.subnet | ipaddr('broadcast')} area 0
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 497, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 901, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 883, in subparse
    rv = self.parse_statement()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 130, in parse_statement
    return getattr(self, 'parse_' + self.stream.current.value)()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 199, in parse_for
    body = self.parse_statements(('name:endfor', 'name:else'))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 165, in parse_statements
    result = self.subparse(end_tokens)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 883, in subparse
    rv = self.parse_statement()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 130, in parse_statement
    return getattr(self, 'parse_' + self.stream.current.value)()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 213, in parse_if
    'name:endif'))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 165, in parse_statements
    result = self.subparse(end_tokens)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 875, in subparse
    add_data(self.parse_tuple(with_condexpr=True))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 620, in parse_tuple
    args.append(parse())
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 432, in parse_expression
    return self.parse_condexpr()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 437, in parse_condexpr
    expr1 = self.parse_or()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 450, in parse_or
    left = self.parse_and()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 459, in parse_and
    left = self.parse_not()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 470, in parse_not
    return self.parse_compare()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 474, in parse_compare
    expr = self.parse_math1()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 496, in parse_math1
    left = self.parse_concat()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 507, in parse_concat
    args = [self.parse_math2()]
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 517, in parse_math2
    left = self.parse_pow()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 528, in parse_pow
    left = self.parse_unary()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 549, in parse_unary
    node = self.parse_filter_expr(node)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 685, in parse_filter_expr
    node = self.parse_filter(node)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 810, in parse_filter
    args, kwargs, dyn_args, dyn_kwargs = self.parse_call(None)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 793, in parse_call
    self.stream.expect('rparen')
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/lexer.py", line 388, in expect
    next(self)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/lexer.py", line 359, in __next__
    self.current = next(self._iter)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/lexer.py", line 562, in wrap
    for lineno, token, value in stream:
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/lexer.py", line 683, in tokeniter
    filename)
jinja2.exceptions.TemplateSyntaxError: unexpected '}'

2019-04-25 12:02:06,591 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'push_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 88, in push_templates
    config += routing_templates(task)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 181, in routing_templates
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP OSPF (failed)


2019-04-25 12:02:38,160 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-25 12:02:38,238 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP OSPF' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 125, in load
    code = environment.compile(source, name, filename)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 591, in compile
    self.handle_exception(exc_info, source_hint=source_hint)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/ospf.j2", line 7, in template
    network {{ intf.ip }} {{ intf.subnet | ipaddr('broadcast') }} area 0
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 543, in _generate
    optimized=self.optimized)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/compiler.py", line 82, in generate
    generator.visit(node)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/visitor.py", line 38, in visit
    return f(node, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/compiler.py", line 754, in visit_Template
    self.blockvisit(node.body, frame)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/compiler.py", line 378, in blockvisit
    self.visit(node, frame)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/visitor.py", line 38, in visit
    return f(node, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/compiler.py", line 1122, in visit_For
    self.blockvisit(node.body, loop_frame)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/compiler.py", line 378, in blockvisit
    self.visit(node, frame)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/visitor.py", line 38, in visit
    return f(node, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/compiler.py", line 1160, in visit_If
    self.blockvisit(node.body, if_frame)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/compiler.py", line 378, in blockvisit
    self.visit(node, frame)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/visitor.py", line 38, in visit
    return f(node, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/compiler.py", line 1358, in visit_Output
    self.visit(argument, frame)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/visitor.py", line 38, in visit
    return f(node, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/compiler.py", line 70, in new_func
    return f(self, node, frame, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/compiler.py", line 1578, in visit_Filter
    self.fail('no filter named %r' % node.name, node.lineno)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/compiler.py", line 315, in fail
    raise TemplateAssertionError(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateAssertionError: no filter named 'ipaddr'

2019-04-25 12:02:38,238 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'push_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 88, in push_templates
    config += routing_templates(task)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 181, in routing_templates
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP OSPF (failed)


2019-04-25 12:12:17,615 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-25 14:41:51,206 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-25 14:41:51,287 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP MULTICAST' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 18, in render_from_file
    return t.render(**kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/multicast.j2", line 11, in top-level template code
    ip address {{ host.multicast.anycast.ip }} {{ host.multicast.anycast.subnet }}
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'name'

2019-04-25 14:41:51,288 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'push_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 88, in push_templates
    config += routing_templates(task)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 191, in routing_templates
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP MULTICAST (failed)


2019-04-25 14:44:05,259 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-25 14:44:05,329 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP MULTICAST' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 18, in render_from_file
    return t.render(**kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/multicast.j2", line 11, in top-level template code
    ip address {{ host.multicast.anycast.ip }} {{ host.multicast.anycast.subnet }}
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'name'

2019-04-25 14:44:05,330 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'push_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 88, in push_templates
    config += routing_templates(task)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 191, in routing_templates
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP MULTICAST (failed)


2019-04-25 14:44:51,600 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-25 14:44:51,675 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP MULTICAST' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 18, in render_from_file
    return t.render(**kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/multicast.j2", line 17, in top-level template code
    ip pim rp-candidate {{ host.multicast.anycast.name }} priority 255 bidir
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'name'

2019-04-25 14:44:51,676 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'push_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 88, in push_templates
    config += routing_templates(task)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 191, in routing_templates
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP MULTICAST (failed)


2019-04-25 14:45:30,438 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-25 14:45:30,518 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP MULTICAST' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 18, in render_from_file
    return t.render(**kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/multicast.j2", line 19, in top-level template code
    {% if host[device_name] == "CoreSPINEcuca01" %}
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 411, in getitem
    return obj[argument]
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/inventory.py", line 150, in __getitem__
    return self.data[item]
jinja2.exceptions.UndefinedError: 'device_name' is undefined

2019-04-25 14:45:30,518 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'push_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 88, in push_templates
    config += routing_templates(task)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 191, in routing_templates
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP MULTICAST (failed)


2019-04-25 14:45:59,115 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-25 14:45:59,197 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP MULTICAST' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 18, in render_from_file
    return t.render(**kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/multicast.j2", line 27, in top-level template code
    ip msdp originator-id {{ srcintf|join() }}
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'peer_victoria'

2019-04-25 14:45:59,197 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'push_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 88, in push_templates
    config += routing_templates(task)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 191, in routing_templates
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP MULTICAST (failed)


2019-04-25 14:46:26,741 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-25 14:48:01,944 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-25 14:51:42,589 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-25 14:59:04,734 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-25 16:23:21,147 -  nornir.core -     INFO -        run() - Running task 'bgp_templates' with args {} on 1 hosts
2019-04-25 16:23:41,105 -  nornir.core -     INFO -        run() - Running task 'bgp_templates' with args {} on 1 hosts
2019-04-25 16:23:41,135 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP BGP' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 125, in load
    code = environment.compile(source, name, filename)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 591, in compile
    self.handle_exception(exc_info, source_hint=source_hint)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/bgp.j2", line 8, in template
    {% endfor %}
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 497, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 901, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 883, in subparse
    rv = self.parse_statement()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 130, in parse_statement
    return getattr(self, 'parse_' + self.stream.current.value)()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 199, in parse_for
    body = self.parse_statements(('name:endfor', 'name:else'))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 165, in parse_statements
    result = self.subparse(end_tokens)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 883, in subparse
    rv = self.parse_statement()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 130, in parse_statement
    return getattr(self, 'parse_' + self.stream.current.value)()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 213, in parse_if
    'name:endif'))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 170, in parse_statements
    self.fail_eof(end_tokens)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 104, in fail_eof
    return self._fail_ut_eof(None, stack, lineno)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 90, in _fail_ut_eof
    self.fail(' '.join(message), lineno)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 59, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.

2019-04-25 16:23:41,136 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'bgp_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 206, in bgp_templates
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP BGP (failed)


2019-04-25 16:24:24,722 -  nornir.core -     INFO -        run() - Running task 'bgp_templates' with args {} on 1 hosts
2019-04-25 16:24:24,744 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP BGP' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 18, in render_from_file
    return t.render(**kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/bgp.j2", line 1, in top-level template code
    {% for host in groups['distribution-switch'] %}
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 411, in getitem
    return obj[argument]
jinja2.exceptions.UndefinedError: 'groups' is undefined

2019-04-25 16:24:24,745 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'bgp_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 206, in bgp_templates
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP BGP (failed)


2019-04-25 16:24:39,403 -  nornir.core -     INFO -        run() - Running task 'bgp_templates' with args {} on 1 hosts
2019-04-25 16:24:39,428 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP BGP' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 18, in render_from_file
    return t.render(**kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/bgp.j2", line 1, in top-level template code
    {% for host in group['distribution-switch'] %}
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 411, in getitem
    return obj[argument]
jinja2.exceptions.UndefinedError: 'group' is undefined

2019-04-25 16:24:39,429 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'bgp_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 206, in bgp_templates
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP BGP (failed)


2019-04-25 16:25:09,579 -  nornir.core -     INFO -        run() - Running task 'bgp_templates' with args {} on 1 hosts
2019-04-25 16:25:09,601 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP BGP' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 18, in render_from_file
    return t.render(**kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/bgp.j2", line 1, in top-level template code
    {% for host in inventory.groups['distribution-switch'] %}
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'inventory' is undefined

2019-04-25 16:25:09,602 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'bgp_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 206, in bgp_templates
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP BGP (failed)


2019-04-25 16:25:38,460 -  nornir.core -     INFO -        run() - Running task 'bgp_templates' with args {} on 1 hosts
2019-04-25 16:25:38,483 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP BGP' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 18, in render_from_file
    return t.render(**kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/bgp.j2", line 1, in top-level template code
    {% for host in groups['distribution-switch'] %}
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 411, in getitem
    return obj[argument]
jinja2.exceptions.UndefinedError: 'groups' is undefined

2019-04-25 16:25:38,483 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'bgp_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 206, in bgp_templates
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP BGP (failed)


2019-04-25 18:04:33,193 -  nornir.core -     INFO -        run() - Running task 'bgp_templates' with args {} on 1 hosts
2019-04-25 18:04:33,230 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP BGP' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 18, in render_from_file
    return t.render(**kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/bgp.j2", line 13, in top-level template code
    neighbor {{ neig['peer_ip'] }} update-source {{ intfname }}
jinja2.exceptions.UndefinedError: 'intfname' is undefined

2019-04-25 18:04:33,231 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'bgp_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 229, in bgp_templates
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP BGP (failed)


2019-04-25 18:07:31,881 -  nornir.core -     INFO -        run() - Running task 'bgp_templates' with args {} on 1 hosts
2019-04-25 18:07:31,905 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP BGP' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 17, in render_from_file
    t = env.get_template(template)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/loaders.py", line 125, in load
    code = environment.compile(source, name, filename)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 591, in compile
    self.handle_exception(exc_info, source_hint=source_hint)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/bgp.j2", line 8, in template
    {% set srcintf host.interfaces | selectattr('name', 'equalto', 'Loopback0') | map(attribute='name') | list %}
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 497, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 901, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 883, in subparse
    rv = self.parse_statement()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 130, in parse_statement
    return getattr(self, 'parse_' + self.stream.current.value)()
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 185, in parse_set
    drop_needle=True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/parser.py", line 164, in parse_statements
    self.stream.expect('block_end')
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/lexer.py", line 384, in expect
    self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: expected token 'end of statement block', got 'host'

2019-04-25 18:07:31,906 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'bgp_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 229, in bgp_templates
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP BGP (failed)


2019-04-25 18:10:08,607 -  nornir.core -     INFO -        run() - Running task 'bgp_templates' with args {} on 1 hosts
2019-04-25 18:13:18,604 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-25 18:14:45,929 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-25 18:17:28,057 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-26 14:33:14,333 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-26 14:34:18,684 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-26 14:58:00,541 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-26 14:59:26,831 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-26 15:01:32,211 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-26 15:02:00,582 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-26 15:03:02,030 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-26 15:04:32,706 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-26 15:13:48,422 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-26 15:14:17,613 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-26 15:40:42,787 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-26 15:40:42,888 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP BANNER' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 18, in render_from_file
    return t.render(**kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/banner.j2", line 1, in top-level template code
    banner motd &{{ host.motd.banner }}&
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'banner'

2019-04-26 15:40:42,889 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'push_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 94, in push_templates
    config += banner_templates(task)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 252, in banner_templates
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP BANNER (failed)


2019-04-26 15:41:29,137 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-26 15:41:29,229 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP BANNER' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 18, in render_from_file
    return t.render(**kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/banner.j2", line 1, in top-level template code
    banner motd &{{ host['motd'].banner }}&
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'banner'

2019-04-26 15:41:29,229 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'push_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 94, in push_templates
    config += banner_templates(task)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 252, in banner_templates
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP BANNER (failed)


2019-04-26 15:43:21,154 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-26 15:43:21,254 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'SETUP BANNER' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/plugins/tasks/text/template_file.py", line 35, in template_file
    **kwargs
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/helpers/jinja_helper.py", line 18, in render_from_file
    return t.render(**kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "./templates/banner.j2", line 1, in top-level template code
    banner motd &{{ host.motd.banner }}&
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'banner'

2019-04-26 15:43:21,254 - nornir.core.task -    ERROR -      start() - Host 'CoreSPINEcuca01': task 'push_templates' failed with traceback:
Traceback (most recent call last):
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 67, in start
    r = self.task(self, **self.params)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 94, in push_templates
    config += banner_templates(task)
  File "/Users/juniormateus/PycharmProjects/NORNIR/nornir_autom01.py", line 252, in banner_templates
    path="./templates/"
  File "/Users/juniormateus/anaconda3/lib/python3.6/site-packages/nornir/core/task.py", line 124, in run
    raise NornirSubTaskError(task=task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: SETUP BANNER (failed)


2019-04-26 15:43:35,224 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-26 15:46:46,680 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
2019-04-26 15:47:42,827 -  nornir.core -     INFO -        run() - Running task 'push_templates' with args {} on 1 hosts
